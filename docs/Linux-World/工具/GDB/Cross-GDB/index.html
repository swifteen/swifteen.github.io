<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="GBD调试方案选择 #  1、如果使用纯命令行方式，学习难度大，但占用资源低，操作起来更流畅
2、选择IDE集成的GDB调试，需要个人电脑上安装虚拟机，搭建linux交叉编译环境，在虚拟机上编译，远程cross GDB，缺点是个人的电脑性能不够
3、在性能强大的docker主机上，通过X11服务连接远程桌面，启动IDE进行GDB调试，当3个人同时操作时，docker服务器也会存在性能不够
因此最终选择方案1，尽管难度更大
Cross GDB #  需要告诉主机上的GDB在哪里去找debug符号和源码
GDB, running on the host, needs to be told where to look for debug symbols and source code, especially for shared libraries
You need debug symbols and source code for the binaries you want to debug on the host, but not on the target. Often, there is not enough storage space for them on the target, and they will need to be stripped before deploying to the target.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Cross GDB" />
<meta property="og:description" content="GBD调试方案选择 #  1、如果使用纯命令行方式，学习难度大，但占用资源低，操作起来更流畅
2、选择IDE集成的GDB调试，需要个人电脑上安装虚拟机，搭建linux交叉编译环境，在虚拟机上编译，远程cross GDB，缺点是个人的电脑性能不够
3、在性能强大的docker主机上，通过X11服务连接远程桌面，启动IDE进行GDB调试，当3个人同时操作时，docker服务器也会存在性能不够
因此最终选择方案1，尽管难度更大
Cross GDB #  需要告诉主机上的GDB在哪里去找debug符号和源码
GDB, running on the host, needs to be told where to look for debug symbols and source code, especially for shared libraries
You need debug symbols and source code for the binaries you want to debug on the host, but not on the target. Often, there is not enough storage space for them on the target, and they will need to be stripped before deploying to the target." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://swifteen.github.io/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/Cross-GDB/" /><meta property="article:section" content="docs" />



<title>Cross GDB | Freedom Book</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.8af359f8b4ff91864838b7225239a34a4ca449e60ef99ab88e33c978c8685391.css" integrity="sha256-ivNZ&#43;LT/kYZIOLciUjmjSkykSeYO&#43;Zq4jjPJeMhoU5E=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.7445bbe793a3cc0e5920ca9eba7c2ca3c6af1ae9b17fe43767e80a5a22f8da8d.js" integrity="sha256-dEW755OjzA5ZIMqeunwso8avGumxf&#43;Q3Z&#43;gKWiL42o0=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Freedom Book</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="">读书笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4c7a8762e11234f0d57f7ddf2ca93f4b" class="toggle"  />
    <label for="section-4c7a8762e11234f0d57f7ddf2ca93f4b" class="flex justify-between">
      <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" class="">深入理解计算机系统</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/" class="">第一章</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/4th-level/" class="">4th Level</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/5th-level/" class="">5th Level</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/5th-level/6th-level/" class="">6th Level</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%8C%E7%AB%A0/" class="">第二章</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%8C%E7%AB%A0/7th-level/" class="">7th Level</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%8C%E7%AB%A0/7th-level/12th-level/" class="">12th Level</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%8C%E7%AB%A0/8th-level/" class="">8th Level</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dd5f1074ae82c341625837814d568aa3" class="toggle"  />
    <label for="section-dd5f1074ae82c341625837814d568aa3" class="flex justify-between">
      <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/" class="">Effective Cpp</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/1.%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B9%A0%E6%83%AFC&#43;&#43;/" class="">1.让自己习惯C&#43;&#43;</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/2.%E6%9E%84%E9%80%A0%E6%9E%90%E6%9E%84%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/" class="">2.构造、析构、赋值运算</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/3.%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" class="">3.资源管理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/4.%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/" class="">4.设计与声明</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/5.%E5%AE%9E%E7%8E%B0/" class="">5.实现</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/EffectiveCpp/6.%E7%BB%A7%E6%89%BF%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="">6.继承与面向对象</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b6c1134fae0449f6c190514c96d9ab3a" class="toggle"  />
    <label for="section-b6c1134fae0449f6c190514c96d9ab3a" class="flex justify-between">
      <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Advanced-Qt-Programming/" class="">Advanced Qt Programming</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Advanced-Qt-Programming/Table-Model/" class="">Table Model</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/" class="">工程实践</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/FalconMode/" class="">FalconMode模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/BBB%E6%9D%BF%E4%BD%BF%E7%94%A8NFS%E6%8C%82%E8%BD%BD%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="">BBB板使用NFS挂载文件系统</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" class="">工作总结</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/%E4%B9%B1%E7%A0%81/" class="">乱码</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="">数据库</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/" class="">日志模块实现思路</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/Qt%E6%80%BB%E7%BB%93/" class="">Qt总结</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Qt%E6%80%BB%E7%BB%93/%E5%B8%B8%E7%94%A8%E7%B1%BB%E4%BD%BF%E7%94%A8/" class="">常见类使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Qt%E6%80%BB%E7%BB%93/snippet/" class="">snippet</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Qt%E6%80%BB%E7%BB%93/QSS%E6%A0%B7%E5%BC%8F/" class="">QSS样式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Qt%E6%80%BB%E7%BB%93/%E6%95%B4%E7%90%86Qt-snippet/" class="">整理 Qt Snippet</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/Linux-World/" class="">Linux World</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/" class="">工具</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f67d5457c2a7968846f5c501082b1554" class="toggle" checked />
    <label for="section-f67d5457c2a7968846f5c501082b1554" class="flex justify-between">
      <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/" class="">Gdb</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/%E5%88%A9%E7%94%A8Yocto%E5%B7%A5%E7%A8%8B%E7%94%9F%E6%88%90debug%E7%AC%A6%E5%8F%B7/" class="">利用Yocto工程生成debug符号</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/GDB%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="">GDB常用命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/Cross-GDB/" class=" active">Cross GDB</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/Native-GDB/" class="">Native GDB</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/GDB-tui%E6%A8%A1%E5%BC%8F/" class="">GDB tui模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/Core%E6%96%87%E4%BB%B6%E8%B0%83%E8%AF%95/" class="">Core文件调试</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/GDB/GDB%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="">GDB高级用法</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-83b60d0d5385ebdbc58106dfadf6f8ec" class="toggle"  />
    <label for="section-83b60d0d5385ebdbc58106dfadf6f8ec" class="flex justify-between">
      <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Git/" class="">Git</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Git/git%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/" class="">Git常用配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Git/git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="">git基本使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Git/git%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8/" class="">git高级使用</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d5b311234c6410083508e37cc63fc1b6" class="toggle"  />
    <label for="section-d5b311234c6410083508e37cc63fc1b6" class="flex justify-between">
      <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Vim/" class="">Vim</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/Vim/%E9%85%8D%E7%BD%AE/" class="">配置</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/%E5%B7%A5%E5%85%B7/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/" class="">常用 Linux命令</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4a2fe1f775a45aa533a141965b5ef749" class="toggle"  />
    <label for="section-4a2fe1f775a45aa533a141965b5ef749" class="flex justify-between">
      <a href="/docs/Linux-World/Raspberry/" class="">Raspberry</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/Raspberry/%E5%B8%B8%E7%94%A8/" class="">常用</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-23ec4bc7089b12961617b50da77ae792" class="toggle"  />
    <label for="section-23ec4bc7089b12961617b50da77ae792" class="flex justify-between">
      <a href="/docs/Linux-World/Ubuntu/" class="">Ubuntu</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/Ubuntu/%E7%9B%AE%E5%BD%95%E5%85%B1%E4%BA%AB%E9%85%8D%E7%BD%AE/" class="">目录共享配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/Ubuntu/%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86%E5%92%8C%E8%AF%81%E4%B9%A6/" class="">系统代理和证书</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/Linux-World/Ubuntu/%E5%85%B6%E5%AE%83/" class="">其它</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/swifteen/" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://themes.gohugo.io/hugo-book/" target="_blank" rel="noopener">
        Hugo Themes
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Cross GDB</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#gbd调试方案选择">GBD调试方案选择</a></li>
    <li><a href="#cross-gdb">Cross GDB</a>
      <ul>
        <li><a href="#目标板上使用gdbserver运行程序">目标板上使用gdbserver运行程序</a></li>
        <li><a href="#在主机上运行gdb">在主机上运行gdb</a></li>
        <li><a href="#设置代码文件路径替换">设置代码文件路径替换</a></li>
        <li><a href="#导入符号表">导入符号表</a></li>
      </ul>
    </li>
    <li><a href="#遇到错误">遇到错误</a>
      <ul>
        <li><a href="#1c库函数符号找不到">1、C库函数符号找不到</a></li>
        <li><a href="#2查找不到库文件">2、查找不到库文件</a></li>
        <li><a href="#3找不到符号">3、找不到符号</a></li>
        <li><a href="#3找不到自己的代码文件">3、找不到自己的代码文件</a></li>
      </ul>
    </li>
    <li><a href="#参考链接">参考链接</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="gbd调试方案选择">
  GBD调试方案选择
  <a class="anchor" href="#gbd%e8%b0%83%e8%af%95%e6%96%b9%e6%a1%88%e9%80%89%e6%8b%a9">#</a>
</h1>
<p>1、如果使用纯命令行方式，学习难度大，但占用资源低，操作起来更流畅</p>
<p>2、选择IDE集成的GDB调试，需要个人电脑上安装虚拟机，搭建linux交叉编译环境，在虚拟机上编译，远程cross GDB，缺点是个人的电脑性能不够</p>
<p>3、在性能强大的docker主机上，通过X11服务连接远程桌面，启动IDE进行GDB调试，当3个人同时操作时，docker服务器也会存在性能不够</p>
<p>因此最终选择方案1，尽管难度更大</p>
<h1 id="cross-gdb">
  Cross GDB
  <a class="anchor" href="#cross-gdb">#</a>
</h1>
<p>需要告诉主机上的GDB在哪里去找debug符号和源码</p>
<p>GDB, running on the host, needs to be told where to look for debug symbols and source code, especially for shared libraries</p>
<p>You need debug symbols and source code for the binaries you want to debug on the host, but not on the target. Often, there is not enough storage space for them on the target, and they will need to be stripped before deploying to the target.</p>
<h2 id="目标板上使用gdbserver运行程序">
  目标板上使用gdbserver运行程序
  <a class="anchor" href="#%e7%9b%ae%e6%a0%87%e6%9d%bf%e4%b8%8a%e4%bd%bf%e7%94%a8gdbserver%e8%bf%90%e8%a1%8c%e7%a8%8b%e5%ba%8f">#</a>
</h2>
<p>在目标板子上运行gdbserver，验证一下这里的hello-world程序是否可以是stripped的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># gdbserver :10000 ./hello-world</span>
</span></span><span style="display:flex;"><span>Process hello-world created; pid <span style="color:#f92672">=</span> <span style="color:#ae81ff">103</span>
</span></span><span style="display:flex;"><span>Listening on port <span style="color:#ae81ff">10000</span>
</span></span></code></pre></div><h2 id="在主机上运行gdb">
  在主机上运行gdb
  <a class="anchor" href="#%e5%9c%a8%e4%b8%bb%e6%9c%ba%e4%b8%8a%e8%bf%90%e8%a1%8cgdb">#</a>
</h2>
<p>注意这里的hello-world程序必须是unstripped的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>aarch64-poky-linux-gdb hello-world
</span></span><span style="display:flex;"><span><span style="color:#75715e">#连接远程gdbserver</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> target remote 192.168.7.249:9999
</span></span><span style="display:flex;"><span><span style="color:#75715e">#设置sysroot目录</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set sysroot /opt/poky/3.1.5/sysroots/aarch64-poky-linux
</span></span><span style="display:flex;"><span><span style="color:#75715e">#显示源码查找目录，$cdir为编译目录，$cwd为当前目录</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> show directories
</span></span><span style="display:flex;"><span>Source directories searched: $cdir:$cwd
</span></span><span style="display:flex;"><span><span style="color:#75715e">#指定源码查找目录</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Paths added in this way take precedence because they are searched before those from sysroot or solib-search-path</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> directory /home/chris/MELP/src/lib_mylib
</span></span></code></pre></div><h2 id="设置代码文件路径替换">
  设置代码文件路径替换
  <a class="anchor" href="#%e8%ae%be%e7%bd%ae%e4%bb%a3%e7%a0%81%e6%96%87%e4%bb%b6%e8%b7%af%e5%be%84%e6%9b%bf%e6%8d%a2">#</a>
</h2>
<p>GDB has a simple way to cope with an entire directory tree being moved like this: substitute-path. So, when debugging with the Yocto Project SDK, you need to use these commands</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set substitute-path from to
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set sysroot <span style="color:#f92672">[</span>Directory<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set sysroot remote:/
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set sysroot remote:<span style="color:#f92672">[</span>Remote directory<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set solib-absolute-prefix <span style="color:#f92672">[</span>Directory<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> show sysroot
</span></span></code></pre></div><h2 id="导入符号表">
  导入符号表
  <a class="anchor" href="#%e5%af%bc%e5%85%a5%e7%ac%a6%e5%8f%b7%e8%a1%a8">#</a>
</h2>
<p>gdb多线程及动态库调试，需要手动导入带符号表的库路径，可以查看当前已导入的库：</p>
<p>You may have additional shared libraries that are stored outside the sysroot. In that case, you can use set solib-search-path, which can contain a colon-separated list of directories to search for shared libraries. GDB searches solib-search-path only if
it cannot find the binary in the sysroot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set solib-absolute-prefix ../out/target/product/tiny4412/symbols
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set solib-search-path ../out/target/product/tiny4412/symbols/system/lib
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> info sharedlibrary
</span></span></code></pre></div><p>The latter is encoded into the object files with the tag DW_AT_comp_dir. You can see these tags using objdump &ndash;dwarf</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>aarch64-poky-linux-objdump --dwarf ./helloworld | grep DW_AT_comp_dir
</span></span></code></pre></div><h1 id="遇到错误">
  遇到错误
  <a class="anchor" href="#%e9%81%87%e5%88%b0%e9%94%99%e8%af%af">#</a>
</h1>
<h2 id="1c库函数符号找不到">
  1、C库函数符号找不到
  <a class="anchor" href="#1c%e5%ba%93%e5%87%bd%e6%95%b0%e7%ac%a6%e5%8f%b7%e6%89%be%e4%b8%8d%e5%88%b0">#</a>
</h2>
<p>
  <a href="https://stackoverflow.com/questions/48278881/gdb-complaining-about-missing-raise-c/48287761#48287761">https://stackoverflow.com/questions/48278881/gdb-complaining-about-missing-raise-c/48287761#48287761</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Program received signal SIGABRT, Aborted.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0x76cd0f70</span> in __GI_raise (sig<span style="color:#f92672">=</span>sig<span style="color:#960050;background-color:#1e0010">@</span>entry<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>) at ..<span style="color:#f92672">/</span>nptl<span style="color:#f92672">/</span>sysdeps<span style="color:#f92672">/</span>unix<span style="color:#f92672">/</span>sysv<span style="color:#f92672">/</span>linux<span style="color:#f92672">/</span>raise.c:<span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">56</span>  ..<span style="color:#f92672">/</span>nptl<span style="color:#f92672">/</span>sysdeps<span style="color:#f92672">/</span>unix<span style="color:#f92672">/</span>sysv<span style="color:#f92672">/</span>linux<span style="color:#f92672">/</span>raise.c: No such file or directory.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#查看当前运行的源文件</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> info source
</span></span><span style="display:flex;"><span>Current source file is ../sysdeps/unix/sysv/linux/raise.c
</span></span><span style="display:flex;"><span>Compilation directory is /build/glibc-S7Ft5T/glibc-2.23/signal
</span></span><span style="display:flex;"><span>Source language is c.
</span></span><span style="display:flex;"><span>Producer is GNU C11 5.4.0 <span style="color:#ae81ff">20160609</span> -mtune<span style="color:#f92672">=</span>generic -march<span style="color:#f92672">=</span>x86-64 -g -O2 -O3 -std<span style="color:#f92672">=</span>gnu11 -fgnu89-inline -fno-stack-protector -fmerge-all-constants -frounding-math -fPIC -ftls-model<span style="color:#f92672">=</span>initial-exec.
</span></span><span style="display:flex;"><span>Compiled with DWARF <span style="color:#ae81ff">2</span> debugging format.
</span></span><span style="display:flex;"><span>Does not include preprocessor macro info.
</span></span></code></pre></div><p>解决办法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo mkdir /opt/src
</span></span><span style="display:flex;"><span>cd /opt/src/
</span></span><span style="display:flex;"><span>sudo apt source libc6
</span></span><span style="display:flex;"><span>find $PWD -maxdepth <span style="color:#ae81ff">1</span> -type d -name <span style="color:#e6db74">&#34;glibc*&#34;</span>
</span></span><span style="display:flex;"><span>ls /opt/src/glibc-2.23/sysdeps/unix/sysv/linux/raise.c 
</span></span></code></pre></div><p>设置库路径</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>(gdb) set substitute<span style="color:#f92672">-</span>path <span style="color:#f92672">/</span>build<span style="color:#f92672">/</span>glibc<span style="color:#f92672">-</span>S7Ft5T<span style="color:#f92672">/</span>glibc<span style="color:#f92672">-</span><span style="color:#ae81ff">2.23</span> <span style="color:#f92672">/</span>opt<span style="color:#f92672">/</span>src<span style="color:#f92672">/</span>glibc<span style="color:#f92672">-</span><span style="color:#ae81ff">2.23</span>
</span></span></code></pre></div><h2 id="2查找不到库文件">
  2、查找不到库文件
  <a class="anchor" href="#2%e6%9f%a5%e6%89%be%e4%b8%8d%e5%88%b0%e5%ba%93%e6%96%87%e4%bb%b6">#</a>
</h2>
<p>
  <a href="https://stackoverflow.com/questions/16254546/gdb-can-not-open-shared-object-file">https://stackoverflow.com/questions/16254546/gdb-can-not-open-shared-object-file</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> r
</span></span><span style="display:flex;"><span>Starting program: /home/ubuntu/targetNFS/test/build/test_main 
</span></span><span style="display:flex;"><span>/home/ubuntu/targetNFS/test/build/test_main: error <span style="color:#66d9ef">while</span> loading shared libraries: libiconv.so.2: cannot open shared object file: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Inferior <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>process 39876<span style="color:#f92672">)</span> exited with code 0177<span style="color:#f92672">]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set env LD_LIBRARY_PATH /usr/local/lib/
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set environment LD_LIBRARY_PATH /usr/local/lib/
</span></span></code></pre></div><h2 id="3找不到符号">
  3、找不到符号
  <a class="anchor" href="#3%e6%89%be%e4%b8%8d%e5%88%b0%e7%ac%a6%e5%8f%b7">#</a>
</h2>
<p>\1. 确保在编译proc的时候，加上了-g参数，用于调试。</p>
<p>\2. 用如下命令列出proc所具有的全部的符号</p>
<blockquote>
<p>nm proc</p>
</blockquote>
<p>\3. 在proc所具有的全部的符号中，搜索foo，得到</p>
<blockquote>
<p>_ZN3NamespaceA6ClassA16fooEP6ClassB
_ZN3NamespaceA6ClassA16fooEb</p>
</blockquote>
<p>可以确定完整的foo函数签名应该是</p>
<blockquote>
<p>NamespaceA::ClassA::foo</p>
</blockquote>
<p>执行</p>
<blockquote>
<p>b NamespaceA::ClassA::foo</p>
</blockquote>
<p>gdb多线程及动态库调试，需要手动导入带符号表的库路径，可以查看当前已导入的库：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>set solib-absolute-prefix ../out/target/product/tiny4412/symbols
</span></span><span style="display:flex;"><span>set solib-search-path ../out/target/product/tiny4412/symbols/system/lib
</span></span><span style="display:flex;"><span>info sharedlibrary
</span></span></code></pre></div><p>中间有链接静态库需要调试时，在编译静态库时需要去掉编译优化，否则单步调试会乱跳；</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>LOCAL_CFLAGS <span style="color:#f92672">+=</span> -g -O0
</span></span></code></pre></div><h2 id="3找不到自己的代码文件">
  3、找不到自己的代码文件
  <a class="anchor" href="#3%e6%89%be%e4%b8%8d%e5%88%b0%e8%87%aa%e5%b7%b1%e7%9a%84%e4%bb%a3%e7%a0%81%e6%96%87%e4%bb%b6">#</a>
</h2>
<p>解决方法1：修改gcc 选项</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>-fdebug-prefix-map<span style="color:#f92672">=</span>/full/build/path<span style="color:#f92672">=</span>.
</span></span><span style="display:flex;"><span>-fdebug-prefix-map<span style="color:#f92672">=</span>old_path<span style="color:#f92672">=</span>new_path
</span></span></code></pre></div><p>解决方法2：修改gdb配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#利用如下命令设置替换路径规则</span>
</span></span><span style="display:flex;"><span>set subsitute-path from  to
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#举个例子如下</span>
</span></span><span style="display:flex;"><span>/home/ubuntu/test/src/xxx.cpp   <span style="color:#75715e">#编译到程序中的代码路径</span>
</span></span><span style="display:flex;"><span>/mnt/nfs/test/src/xxx.cpp		<span style="color:#75715e">#NFS目录下实际真正的代码文件所在路径</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#那么应该如下设置</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>gdb<span style="color:#f92672">)</span> set subsitute-path /home/ubuntu  /mnt/nfs
</span></span></code></pre></div><p>推荐使用方法2</p>
<p>
  <a href="https://stackoverflow.com/questions/9607155/make-gcc-put-relative-filenames-in-debug-information">https://stackoverflow.com/questions/9607155/make-gcc-put-relative-filenames-in-debug-information</a></p>
<h1 id="参考链接">
  参考链接
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5">#</a>
</h1>
<p>
  <a href="https://jumpnowtek.com/rpi/Qt-Creator-Setup-for-RPi-cross-development.html">Using Qt Creator to cross-compile and debug Raspberry Pi Qt5 apps</a></p>
<p>
  <a href="https://stackoverflow.com/questions/25011953/qt-creator-gdb-remote-debugging-with-debug-helpers">Qt creator gdb remote debugging with debug helpers</a></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">




  <div>
    <a class="flex align-center" href="https://github.com/swifteen/swifteen.github.io/edit/main/exampleSite/content/docs/Linux%20World/%e5%b7%a5%e5%85%b7/GDB/Cross%20GDB.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#gbd调试方案选择">GBD调试方案选择</a></li>
    <li><a href="#cross-gdb">Cross GDB</a>
      <ul>
        <li><a href="#目标板上使用gdbserver运行程序">目标板上使用gdbserver运行程序</a></li>
        <li><a href="#在主机上运行gdb">在主机上运行gdb</a></li>
        <li><a href="#设置代码文件路径替换">设置代码文件路径替换</a></li>
        <li><a href="#导入符号表">导入符号表</a></li>
      </ul>
    </li>
    <li><a href="#遇到错误">遇到错误</a>
      <ul>
        <li><a href="#1c库函数符号找不到">1、C库函数符号找不到</a></li>
        <li><a href="#2查找不到库文件">2、查找不到库文件</a></li>
        <li><a href="#3找不到符号">3、找不到符号</a></li>
        <li><a href="#3找不到自己的代码文件">3、找不到自己的代码文件</a></li>
      </ul>
    </li>
    <li><a href="#参考链接">参考链接</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












